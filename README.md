# 神港学園高等学校 合格者お知らせサイト

## 📋 プロジェクト概要

神港学園高等学校の合格者向け情報管理システムです。管理者がお知らせ、書類、合格証書などを管理し、合格者がログインして必要な情報を確認できるWebアプリケーションです。

## ✨ 主要機能

### 🎯 管理者機能

#### 📢 お知らせ管理
- **お知らせの作成・編集・削除**
- **公開・非公開制御**: 学生への表示を制御
- **予約公開機能**: 指定した日時に自動公開
- **即座公開**: 作成時に即座に学生に公開
- **公開状態の視覚的表示**: 公開/非公開バッジ

#### 📊 個人結果管理
- **Excelファイルアップロード**: 受験結果データの一括登録
- **個別編集・削除**: 受験結果の詳細編集
- **検索・フィルター機能**: 受験番号、氏名、合格状況での絞り込み
- **CSV/Excel出力**: データのエクスポート機能
- **合格状況表示**: 合格/不合格/廻し合格の自動判定

#### 👥 ユーザー管理
- **CSVファイルアップロード**: 学生アカウントの一括作成
- **受験番号・パスワード管理**: 4桁の受験番号と電話番号下4桁
- **学生一覧表示**: 検索・ソート機能付き

#### 📝 学生プロフィール管理
- **多段階フォーム**: 個人情報、通学方法、芸術科目、健康情報
- **進捗状況管理**: 各セクションの完了状況を追跡
- **CSV/Excel出力**: プロフィールデータのエクスポート
- **カスタムフォーム設定**: 管理者によるフォーム項目のカスタマイズ

#### 📄 書類管理
- **PDFファイルアップロード**: 各種書類の管理
- **学生向けダウンロード**: 合格者が書類をダウンロード

#### 🏆 合格証書管理
- **合格証書アップロード**: 学生IDと紐付けた証書管理
- **個別表示**: 学生が自分の合格証書を確認

#### ⚙️ フォーム設定管理
- **カスタムフィールド**: プロフィールフォームの項目追加・編集
- **フィールド設定**: 必須項目、表示/非表示、バリデーション設定

### 🎓 学生機能

#### 📱 レスポンシブデザイン
- **モバイル最適化**: スマートフォンでの快適な操作
- **ハンバーガーメニュー**: モバイル用のナビゲーション
- **タブレット対応**: 中画面デバイスでの最適表示

#### 📢 お知らせ閲覧
- **公開済みお知らせ**: 管理者が公開したお知らせのみ表示
- **予約公開対応**: 指定時刻に自動表示されるお知らせ
- **リアルタイム更新**: 新しいお知らせの即座反映

#### 📊 個人結果確認
- **個別お知らせ**: 自分の受験結果を確認
- **合格状況表示**: 合格/不合格/廻し合格の詳細表示
- **コース情報**: 出願コースと合格コースの比較

#### 📄 書類ダウンロード
- **各種書類**: 管理者がアップロードした書類のダウンロード
- **合格証書**: 自分の合格証書の確認・ダウンロード

#### 👤 プロフィール管理
- **多段階入力**: 4つのセクションに分かれた詳細な情報入力
- **一時保存**: 各セクションごとの保存機能
- **進捗表示**: 入力完了状況の視覚的表示

## 🛠️ 技術スタック

### フロントエンド
- **Next.js 15**: React 19ベースのフルスタックフレームワーク
- **TypeScript**: 型安全性の確保
- **Tailwind CSS**: モダンなスタイリング
- **レスポンシブデザイン**: モバイルファーストアプローチ

### バックエンド
- **Vercel Serverless Functions**: API Routes
- **Vercel Postgres**: データベース
- **Vercel Blob**: ファイルストレージ

### 認証・セキュリティ
- **SHA-256**: パスワードハッシュ化
- **セッション管理**: 安全なログイン状態管理
- **API分離**: 管理者・学生向けエンドポイントの分離

## 🚀 セットアップ

### 前提条件
- Node.js 18以上
- npm または yarn
- Vercelアカウント
- GitHubアカウント

### 1. リポジトリのクローン
```bash
git clone https://github.com/tegujupe222/shinkogakuen.git
cd shinkogakuen
```

### 2. 依存関係のインストール
```bash
npm install
```

### 3. 環境変数の設定
`.env.local`ファイルを作成し、以下の環境変数を設定：

```env
# Vercel Postgres
POSTGRES_URL=your_postgres_connection_string

# Vercel Blob (オプション)
BLOB_READ_WRITE_TOKEN=your_blob_token
```

### 4. 開発サーバーの起動
```bash
npm run dev
```

### 5. データベースの初期化
開発サーバー起動後、以下のエンドポイントにアクセスしてデータベースを初期化：

```
POST /api/init
POST /api/migrate
```

## 📦 デプロイ

### Vercelへのデプロイ

1. **Vercelプロジェクトの作成**
   - Vercelダッシュボードで新しいプロジェクトを作成
   - GitHubリポジトリと連携

2. **環境変数の設定**
   - Vercelダッシュボードで環境変数を設定
   - `POSTGRES_URL`: Vercel Postgresの接続文字列

3. **データベースの設定**
   - Vercel Postgresをプロジェクトに追加
   - データベース作成後、`/api/init`エンドポイントにアクセス

4. **自動デプロイ**
   - GitHubにプッシュすると自動的にデプロイ

## 🔧 使用方法

### 管理者ログイン
- **受験番号**: `9999`
- **パスワード**: `5896`

### 学生ログイン
- **受験番号**: CSVアップロードで設定された4桁の番号
- **パスワード**: 電話番号の下4桁

### 管理者操作フロー

1. **お知らせ作成**
   - お知らせ管理タブで新規作成
   - 公開設定と予約公開時刻を設定
   - 保存して学生に公開

2. **学生アカウント作成**
   - ユーザー管理タブでCSVアップロード
   - 受験番号と電話番号のCSVファイルをアップロード

3. **個人結果登録**
   - 個人結果管理タブでExcelアップロード
   - 受験結果データを一括登録

4. **書類管理**
   - 書類管理タブでPDFファイルをアップロード
   - 学生がダウンロード可能

### 学生操作フロー

1. **ログイン**
   - 受験番号とパスワードでログイン

2. **お知らせ確認**
   - 公開済みのお知らせを確認

3. **個人結果確認**
   - 自分の受験結果を確認

4. **プロフィール入力**
   - 4つのセクションに分かれた詳細情報を入力
   - 各セクションごとに保存

## 📁 プロジェクト構造

```
合格者お知らせサイト/
├── app/                          # Next.js App Router
│   ├── api/                      # API Routes
│   │   ├── announcements/        # お知らせAPI
│   │   ├── auth/                 # 認証API
│   │   ├── results/              # 個人結果API
│   │   └── ...
│   └── page.tsx                  # メインページ
├── components/                   # Reactコンポーネント
│   ├── admin/                    # 管理者用コンポーネント
│   ├── student/                  # 学生用コンポーネント
│   ├── shared/                   # 共通コンポーネント
│   └── icons/                    # アイコンコンポーネント
├── lib/                          # ユーティリティ
│   └── db.ts                     # データベース関数
├── hooks/                        # カスタムフック
├── types.ts                      # TypeScript型定義
└── README.md                     # このファイル
```

## 🔒 セキュリティ機能

- **パスワードハッシュ化**: SHA-256による安全なパスワード管理
- **API分離**: 管理者・学生向けエンドポイントの完全分離
- **データフィルタリング**: 学生には公開済みデータのみ表示
- **入力検証**: フロントエンド・バックエンド両方でのバリデーション

## 📱 レスポンシブ対応

- **モバイルファースト**: スマートフォンでの最適な表示
- **ハンバーガーメニュー**: モバイル用ナビゲーション
- **タブレット対応**: 中画面デバイスでの最適化
- **デスクトップ対応**: 大画面での快適な操作

## 🚀 今後の拡張予定

- **プッシュ通知**: 新しいお知らせの通知機能
- **ファイル管理**: より高度なファイル管理機能
- **レポート機能**: データ分析・レポート生成
- **多言語対応**: 国際化対応

## 📞 サポート

技術的な問題や機能の要望については、GitHubのIssuesページでお知らせください。

## 📄 ライセンス

このプロジェクトは神港学園高等学校専用のシステムです。

---

**開発者**: AI Assistant  
**最終更新**: 2025年8月23日  
**バージョン**: 1.0.0
